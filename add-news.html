<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="Robust admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template.">
    <meta name="keywords" content="admin template, robust admin template, dashboard template, flat admin template, responsive admin template, web app, crypto dashboard, bitcoin dashboard">
    <meta name="author" content="PIXINVENT">
    <title>BossKu Dashboard</title>
    <link rel="apple-touch-icon" href="app-assets/images/ico/apple-icon-120.png">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Muli:300,400,500,700" rel="stylesheet">
    <!-- BEGIN VENDOR CSS-->
  <link rel="stylesheet" type="text/css" href="app-assets/css/vendors.css">
  <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/forms/icheck/icheck.css">
  <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/forms/icheck/custom.css">
  <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/forms/toggle/switchery.min.css">
  <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/forms/selects/select2.min.css">
  <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/forms/spinner/jquery.bootstrap-touchspin.css">
  <!-- END VENDOR CSS-->
  <!-- BEGIN ROBUST CSS-->
  <link rel="stylesheet" type="text/css" href="app-assets/css/app.css">
  <!-- END ROBUST CSS-->
  <!-- BEGIN Page Level CSS-->
  <link rel="stylesheet" type="text/css" href="app-assets/css/core/menu/menu-types/vertical-menu.css">
  <link rel="stylesheet" type="text/css" href="app-assets/css/core/colors/palette-gradient.css">
  <link rel="stylesheet" type="text/css" href="app-assets/css/plugins/forms/switch.css">
  <link rel="stylesheet" type="text/css" href="app-assets/css/core/colors/palette-callout.css">
  <!-- END Page Level CSS-->
  <!-- BEGIN Custom CSS-->
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">

  <style>
    #uploader {
      -webkit-appearance :none;
      appearance : none;
      width: 50%;
      margin-top: 10px;
    }
    #oldImg{
      display: block;
    }
  </style>
  <!-- END Custom CSS-->
  <body class="vertical-layout vertical-menu 2-columns   menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-col="2-columns">

    <!-- fixed-top-->
    <nav class="header-navbar navbar-expand-md navbar navbar-with-menu fixed-top navbar-semi-dark navbar-shadow">
      <div class="navbar-wrapper">
        <div class="navbar-header">
          <ul class="nav navbar-nav flex-row">
            <li class="nav-item mobile-menu d-md-none mr-auto"><a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#"><i class="ft-menu font-large-1"></i></a></li>
            <li class="nav-item"><a class="navbar-brand" href="index.html">
                <h3 class="brand-text">BossKu Admin</h3></a></li>
            <li class="nav-item d-md-none"><a class="nav-link open-navbar-container" data-toggle="collapse" data-target="#navbar-mobile"><i class="fa fa-ellipsis-v"></i></a></li>
          </ul>
        </div>
        <div class="navbar-container content">
          <div class="collapse navbar-collapse" id="navbar-mobile">
            <ul class="nav navbar-nav mr-auto float-left">
              <li class="nav-item d-none d-md-block"><a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#"><i class="ft-menu"></i></a></li>
            </ul>
            <ul class="nav navbar-nav float-right">
              <li class="dropdown dropdown-user nav-item"><a class="dropdown-toggle nav-link dropdown-user-link" href="#" data-toggle="dropdown"><span class="user-name" id="user_email"></span></a>
                <div class="dropdown-menu dropdown-menu-right">
                  <a class="dropdown-item" href="#" id="logoutBtn"><i class="ft-power"></i> Logout</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <!-- ////////////////////////////////////////////////////////////////////////////-->


    <div class="main-menu menu-fixed menu-dark menu-accordion menu-shadow" data-scroll-to-active="true">
      <div class="main-menu-content">
        <ul class="navigation navigation-main" id="main-menu-navigation" data-menu="menu-navigation">
          <li class=" nav-item"><a href="index.html"><span class="menu-title" data-i18n="">Members</span></a>                
          </li>              
          <li class=" nav-item active"><a href="news.html"><span class="menu-title" data-i18n="">News</span></a>
          </li>
          <li class=" nav-item"><a href="forum.html"><span class="menu-title" data-i18n="">Forum</span></a>
          </li>          
        </ul>
      </div>
    </div>

    <div class="app-content content">
      <div class="content-wrapper">
        <!-- Table column borders end -->
        <!-- Both borders end-->
        <div class="row">
          <div class="col-12">
            <form class="form">
                      <div class="form-body"> 
                        <input type="hidden" name="article-key" id="articleKey">                     
                        <div class="form-group">
                          <label>Title</label>
                          <input class="form-control border-primary" id="title" type="text" placeholder="Judul Berita" required>
                        </div>
                        <div class="form-group">
                          <label for="content">Article</label>
                          <textarea id="content" rows="10" class="form-control border-primary" name="article" required 
                          placeholder="Isi berita . . ."></textarea>
                        </div>
                        <fieldset class="form-group">
                          <label for="urlImg">Image Featured</label>
                          <img src="" id="oldImg">                        
                          <input type="file" class="form-control-file" value="upload" id="urlImg">
                          <progress value="0" max="100" id="uploader">0%</progress>
                        </fieldset>
                      </div>
                      <div class="form-actions right">                    
                        <a href="news.html" type="button" class="btn btn-warning mr-1">
                          <i class="ft-x"></i> Cancel
                        </a>
                        <button type="button" class="btn btn-primary" onclick="save_article();">
                          <i class="fa fa-check-square-o"></i> Save
                        </button>
                      </div>
                    </form>
            </div>
            </div>
        <!-- Both borders end -->
        <!-- Borderless table end-->
    </div>
  </div>
    <!-- ////////////////////////////////////////////////////////////////////////////-->


    <footer class="footer footer-static footer-light navbar-border">
      <p class="clearfix blue-grey lighten-2 text-sm-center mb-0 px-2"><span class="float-md-left d-block d-md-inline-block">Copyright  &copy; 2018 <a class="text-bold-800 grey darken-2" href="https://themeforest.net/user/pixinvent/portfolio?ref=pixinvent" target="_blank">BossKu </a>, All rights reserved.
    </footer>

    <!-- BEGIN VENDOR JS-->
    <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
      <script>
        // Initialize Firebase
        var config = {
          apiKey: "AIzaSyCSztdMFxoqjg_iQJ6sFMGprrKu_VgBIJ4",
          authDomain: "bosq-indonesia.firebaseapp.com",
          databaseURL: "https://bosq-indonesia.firebaseio.com",
          projectId: "bosq-indonesia",
          storageBucket: "bosq-indonesia.appspot.com",
          messagingSenderId: "938841148528"
        };
        firebase.initializeApp(config);   

        var uploader = document.getElementById('uploader');
        var urlImg = document.getElementById('urlImg');

        urlImg.addEventListener('change', function(e) {
          var file = e.target.files[0];
          var storageRef = firebase.storage().ref('articles/' + file.name);
          // Get the download URL      

          var task = storageRef.put(file);

          task.on('state_changed',
            function progress(snapshot) {
              var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
              uploader.value = percentage;
            },

            function error(err) {
              alert('Upload Gagal!');   
            },

            function complete() {
              alert('Upload Image Succes!');   
              storageRef.getDownloadURL().then(function(url) {      
                urlImg.src = url;
              });
              $("#oldImg").attr('src','');
            });
        });

        let urlParams = new URLSearchParams(window.location.search);
        if(urlParams.get('key') != null){

          firebase.database().ref('articles/' + urlParams.get('key')).once('value', function(data){
            if(data.val() != null){
              var article = data.val();
              $("#title").val(article.title);
              $("#content").text(article.content);
              $("#articleKey").val(data.key);
              $("#oldImg").attr('src',article.urlImg);
            }
          });
        }

      </script>      
    <script src="main.js"></script>
    <script src="app-assets/js/core/libraries/jquery.min.js" type="text/javascript"></script>
    <script src="app-assets/vendors/js/ui/popper.min.js" type="text/javascript"></script>
    <script src="app-assets/js/core/libraries/bootstrap.min.js" type="text/javascript"></script>
    <script src="app-assets/vendors/js/ui/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
    <script src="app-assets/vendors/js/ui/unison.min.js" type="text/javascript"></script>
    <script src="app-assets/vendors/js/ui/blockUI.min.js" type="text/javascript"></script>
    <script src="app-assets/vendors/js/ui/jquery-sliding-menu.js" type="text/javascript"></script>
    <!-- BEGIN VENDOR JS-->
    <!-- BEGIN PAGE VENDOR JS-->
    <!-- END PAGE VENDOR JS-->
    <!-- BEGIN ROBUST JS-->
    <script src="app-assets/js/core/app-menu.js" type="text/javascript"></script>
    <script src="app-assets/js/core/app.js" type="text/javascript"></script>
    <!-- END ROBUST JS-->
    <!-- BEGIN PAGE LEVEL JS-->
    <!-- END PAGE LEVEL JS-->
     <!-- BEGIN PAGE VENDOR JS-->
    <script src="app-assets/vendors/js/forms/icheck/icheck.min.js" type="text/javascript"></script>
    <script src="app-assets/vendors/js/forms/toggle/bootstrap-checkbox.min.js"
    type="text/javascript"></script>
    <script src="app-assets/vendors/js/forms/toggle/switchery.min.js" type="text/javascript"></script>
    <script src="app-assets/vendors/js/forms/select/select2.full.min.js" type="text/javascript"></script>
    <script src="app-assets/vendors/js/forms/spinner/jquery.bootstrap-touchspin.js"
    type="text/javascript"></script>
    <script src="https://www.google.com/jsapi" type="text/javascript"></script>
    <script src="app-assets/vendors/js/charts/jquery.sparkline.min.js" type="text/javascript"></script>
    <!-- END PAGE VENDOR JS-->
    <!-- BEGIN ROBUST JS-->    
    <script src="app-assets/js/scripts/customizer.js" type="text/javascript"></script>
    <!-- END ROBUST JS-->
    <!-- BEGIN PAGE LEVEL JS-->
    <script src="app-assets/js/scripts/tables/components/table-components.js"
    type="text/javascript"></script>
    <!-- END PAGE LEVEL JS-->
    <script src="app-assets/js/scripts/bootbox/bootbox.min.js"></script>
  </body>
</html>